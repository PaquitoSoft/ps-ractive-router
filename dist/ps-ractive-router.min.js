!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Ractive")):"function"==typeof define&&define.amd?define(["Ractive"],e):"object"==typeof exports?exports.PSRR=e(require("Ractive")):t.PSRR=e(t.Ractive)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports.RouterManager={navTo:n(1).navTo},t.exports.BaseApp=n(7),t.exports.BasePage=n(10)},function(t,e,n){function o(t,e,n){return function(o){n(o),t(o,function(t,n,r){var a;t||!n?(a=t||new Error("No PageComponent provided to render for current URL: "+o.path),e(a)):(o.pageName=n._name,o.state=i(o.state,r),e(null,o))})}}var r=n(2),i=n(6);t.exports.init=function(t,e,n){var a=i({onBeforeNavigation:function(){}},n);Object.keys(t).forEach(function(n){r(n,o(t[n],e,a.onBeforeNavigation))}),r(i({hashbang:!0},a))},t.exports.navTo=function(t,e){r.show(t,e)},t.exports.reset=function(){r.callbacks=[]}},function(t,e,n){(function(e){"use strict";function o(t,e){if("function"==typeof t)return o("*",t);if("function"==typeof e)for(var n=new s(t),r=1;r<arguments.length;++r)o.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?o["string"==typeof e?"redirect":"show"](t,e):o.start(t)}function r(t){if(!t.handled){var e;e=w?y+m.hash.replace("#!",""):m.pathname+m.search,e!==t.canonicalPath&&(o.stop(),t.handled=!1,m.href=t.canonicalPath)}}function i(t){return"string"!=typeof t?t:g?decodeURIComponent(t.replace(/\+/g," ")):t}function a(t,e){"/"===t[0]&&0!==t.indexOf(y)&&(t=y+(w?"#!":"")+t);var n=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(y,"")||"/",w&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=e||{},this.state.path=t,this.querystring=~n?i(t.slice(n+1)):"",this.pathname=i(~n?t.slice(0,n):t),this.params={},this.hash="",!w){if(!~this.path.indexOf("#"))return;var o=this.path.split("#");this.path=o[0],this.hash=i(o[1])||"",this.querystring=this.querystring.split("#")[0]}}function s(t,e){e=e||{},this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=h(this.path,this.keys=[],e.sensitive,e.strict)}function c(t){if(1===u(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var n=t.target;n&&"A"!==n.nodeName;)n=n.parentNode;if(n&&"A"===n.nodeName&&!n.hasAttribute("download")&&"external"!==n.getAttribute("rel")){var r=n.getAttribute("href");if((w||n.pathname!==m.pathname||!n.hash&&"#"!==r)&&!(r&&r.indexOf("mailto:")>-1)&&!n.target&&p(n.href)){var i=n.pathname+n.search+(n.hash||"");"undefined"!=typeof e&&i.match(/^\/[a-zA-Z]:\//)&&(i=i.replace(/^\/[a-zA-Z]:\//,"/"));var a=i;0===i.indexOf(y)&&(i=i.substr(y.length)),w&&(i=i.replace("#!","")),y&&a===i||(t.preventDefault(),o.show(a))}}}}function u(t){return t=t||window.event,null===t.which?t.button:t.which}function p(t){var e=m.protocol+"//"+m.hostname;return m.port&&(e+=":"+m.port),t&&0===t.indexOf(e)}var h=n(4);t.exports=o;var f,l,d="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",m="undefined"!=typeof window&&(window.history.location||window.location),v=!0,g=!0,y="",w=!1;o.callbacks=[],o.exits=[],o.current="",o.len=0,o.base=function(t){return 0===arguments.length?y:void(y=t)},o.start=function(t){if(t=t||{},!f&&(f=!0,!1===t.dispatch&&(v=!1),!1===t.decodeURLComponents&&(g=!1),!1!==t.popstate&&window.addEventListener("popstate",x,!1),!1!==t.click&&document.addEventListener(d,c,!1),!0===t.hashbang&&(w=!0),v)){var e=w&&~m.hash.indexOf("#!")?m.hash.substr(2)+m.search:m.pathname+m.search+m.hash;o.replace(e,null,!0,v)}},o.stop=function(){f&&(o.current="",o.len=0,f=!1,document.removeEventListener(d,c,!1),window.removeEventListener("popstate",x,!1))},o.show=function(t,e,n,r){var i=new a(t,e);return o.current=i.path,!1!==n&&o.dispatch(i),!1!==i.handled&&!1!==r&&i.pushState(),i},o.back=function(t,e){o.len>0?(history.back(),o.len--):t?setTimeout(function(){o.show(t,e)}):setTimeout(function(){o.show(y,e)})},o.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&o(t,function(t){setTimeout(function(){o.replace(e)},0)}),"string"==typeof t&&"undefined"==typeof e&&setTimeout(function(){o.replace(t)},0)},o.replace=function(t,e,n,r){var i=new a(t,e);return o.current=i.path,i.init=n,i.save(),!1!==r&&o.dispatch(i),i},o.dispatch=function(t){function e(){var t=o.exits[s++];return t?void t(i,e):n()}function n(){var e=o.callbacks[a++];return t.path!==o.current?void(t.handled=!1):e?void e(t,n):r(t)}var i=l,a=0,s=0;l=t,i?e():n()},o.exit=function(t,e){if("function"==typeof t)return o.exit("*",t);for(var n=new s(t),r=1;r<arguments.length;++r)o.exits.push(n.middleware(arguments[r]))},o.Context=a,a.prototype.pushState=function(){o.len++,history.pushState(this.state,this.title,w&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},a.prototype.save=function(){history.replaceState(this.state,this.title,w&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},o.Route=s,s.prototype.middleware=function(t){var e=this;return function(n,o){return e.match(n.path,n.params)?t(n,o):void o()}},s.prototype.match=function(t,e){var n=this.keys,o=t.indexOf("?"),r=~o?t.slice(0,o):t,a=this.regexp.exec(decodeURIComponent(r));if(!a)return!1;for(var s=1,c=a.length;c>s;++s){var u=n[s-1],p=i(a[s]);void 0===p&&hasOwnProperty.call(e,u.name)||(e[u.name]=p)}return!0};var x=function(){var t=!1;if("undefined"!=typeof window)return"complete"===document.readyState?t=!0:window.addEventListener("load",function(){setTimeout(function(){t=!0},0)}),function(e){if(t)if(e.state){var n=e.state.path;o.replace(n,e.state)}else o.show(m.pathname+m.hash,void 0,void 0,!1)}}();o.sameOrigin=p}).call(e,n(3))},function(t,e){function n(){u=!1,a.length?c=a.concat(c):p=-1,c.length&&o()}function o(){if(!u){var t=setTimeout(n);u=!0;for(var e=c.length;e;){for(a=c,c=[];++p<e;)a&&a[p].run();p=-1,e=c.length}a=null,u=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function i(){}var a,s=t.exports={},c=[],u=!1,p=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new r(t,e)),1!==c.length||u||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){function o(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function r(t,e){return t.keys=e,t}function i(t){return t.sensitive?"":"i"}function a(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)e.push({name:o,delimiter:null,optional:!1,repeat:!1});return r(t,e)}function s(t,e,n){for(var o=[],a=0;a<t.length;a++)o.push(u(t[a],e,n).source);var s=new RegExp("(?:"+o.join("|")+")",i(n));return r(s,e)}function c(t,e){function n(t,n,i,a,s,c,u,p){if(n)return n;if(p)return"\\"+p;var h="+"===u||"*"===u,f="?"===u||"*"===u;return e.push({name:a||r++,delimiter:i||"/",optional:f,repeat:h}),i=i?"\\"+i:"",s=o(s||c||"[^"+(i||"\\/")+"]+?"),h&&(s=s+"(?:"+i+s+")*"),f?"(?:"+i+"("+s+"))?":i+"("+s+")"}var r=0;return t.replace(h,n)}function u(t,e,n){if(e=e||[],p(e)?n||(n={}):(n=e,e=[]),t instanceof RegExp)return a(t,e,n);if(p(t))return s(t,e,n);var o=n.strict,u=n.end!==!1,h=c(t,e),f="/"===t.charAt(t.length-1);return o||(h=(f?h.slice(0,-2):h)+"(?:\\/(?=$))?"),h+=u?"$":o&&f?"":"(?=\\/|$)",r(new RegExp("^"+h,i(n)),e)}var p=n(5);t.exports=u;var h=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var i,a,s=n(t),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var u in i)o.call(i,u)&&(s[u]=i[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(i);for(var p=0;p<a.length;p++)r.call(i,a[p])&&(s[a[p]]=i[a[p]])}}return s}},function(t,e,n){var o=n(8),r=n(6),i=n(1),a=n(9),s=function(){};t.exports.extend=function(t){var e={el:"#app",components:{},routesConfiguration:{},template:"<div>Missing application template</div>",onBeforeNavigation:s,onNavigationDone:s,pagejsConfig:{},showError:function(t){console.warn("You should implement this function to show this routing error:",t)}},n=r({},e,t||{}),c=n.oncomplete;return n.components=r({Router:a,EmptyPage:o.extend({template:""})},n.components),n.data=r({},n.data,{componentName:"EmptyPage"}),n.oncomplete=function(){n.routesConfiguration&&Object.keys(n.routesConfiguration).length?i.init(n.routesConfiguration,this.onNavigation.bind(this),r({onBeforeNavigation:n.onBeforeNavigation.bind(this)},n.pagejsConfig)):console.warn("Router has not been started as you did not provide its configuration."),c&&c.call(this),this.on("*.PageNavigationDone",function(){n.onNavigationDone.call(this)}.bind(this))},n.onNavigation=function(t,e){t?(console.warn("App::onNavigation# Error navigating:",t),this.showError(t.displayMessage||t.message,t)):this.set({req:{params:e.params,locals:e.state,pageName:e.pageName},componentName:e.pageName})},new o(n)}},function(e,n){e.exports=t},function(t,e,n){var o=n(8),r=o.extend({template:"<router-handler/>",components:{"router-handler":function(){return this.get("componentName")}},oninit:function(){this.observe("componentName",function(t,e){this.fragment.rendered&&(this.reset(),console.log("RouterComponent::oninit# component reset!"))})}});t.exports=r},function(t,e,n){var o=n(8),r=n(6),i=n(1),a=function(){};t.exports.extend=function(t){var e,n=r({template:"",events:{},onRequestDone:a},t),s=a,c=a;return n.onconfig&&(s=n.onconfig),n.oncomplete&&(c=n.oncomplete),n.onconfig=function(){var t=this;this.observe("req",function(t){n.name===t.pageName&&n.onRequestDone.call(this,t)}),Object.keys(n.events).forEach(function(e){t.on(e,n.events[e])}),this.navTo=i.navTo,s.call(this)},n.oncomplete=function(){this.fire("PageNavigationDone"),c.call(this)},e=o.extend(n),e._name=n.name,o.components[n.name]=e,e}}])});